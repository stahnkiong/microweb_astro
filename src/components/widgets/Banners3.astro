---
import type { ImageMetadata } from 'astro'
import { Image } from 'astro:assets'
import Headline from '../ui/Headline.astro'

const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/images/stack/*')
const imagePaths = Object.keys(images).filter((imagePath) => {
  return imagePath.startsWith(`/src/assets/images/stack`)
})

---

<section class="opacity-70 border border-white/10 bg-slate-400 dark:bg-slate-500 not-prose dark:text-neutral-700">
  <div class="mt-20 text-center">
    <Headline title="Some of the Technologies We Use" subtitle='Depending on the project, we utilize different technologies'/>
  </div>
  <div class="max-w-5xl mx-auto text-xs font-medium uppercase mb-20">
    <div class="p-8 grid grid-cols-4 grid-rows-3 md:grid-cols-6 md:grid-rows-2 gap-4 md:gap-10 items-center justify-items-center brightness-0 grayscale contrast-50 drop-shadow-[-.5px_0px_0px_rgba(255,255,255,1)] dark:drop-shadow-[-.5px_0px_0px_rgba(0,0,0,1)]">
      {
        imagePaths.map(async (imagePath) => {
          const image = images[imagePath]()
          const imageAlt = imagePath.split('/').pop() as string;
          return (
            <Image 
              src={image} 
              alt={imageAlt}
              loading="lazy"
              height={40}
              widths={[400, 768]} />
          )
        })
      }
      </div>
  </div>
</section>